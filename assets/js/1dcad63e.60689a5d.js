"use strict";(globalThis.webpackChunkcreate_project_docs=globalThis.webpackChunkcreate_project_docs||[]).push([[2994],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(96540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},53800:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"system-architecture/sequence-diagrams","title":"Sequence Diagrams","description":"Use Case 1: Starting a Session and Drawing UI Sketches","source":"@site/docs/system-architecture/sequence-diagrams.md","sourceDirName":"system-architecture","slug":"/system-architecture/sequence-diagrams","permalink":"/project-001-sketch2screen/docs/system-architecture/sequence-diagrams","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-001-sketch2screen/edit/main/documentation/docs/system-architecture/sequence-diagrams.md","tags":[],"version":"current","lastUpdatedBy":"Sahil-Jartare","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"System Architecture","permalink":"/project-001-sketch2screen/docs/category/system-architecture"},"next":{"title":"Development Environment","permalink":"/project-001-sketch2screen/docs/system-architecture/development-environment"}}');var a=t(74848),s=t(28453);const i={sidebar_position:2},o="Sequence Diagrams",d={},l=[{value:"Use Case 1: Starting a Session and Drawing UI Sketches",id:"use-case-1-starting-a-session-and-drawing-ui-sketches",level:2},{value:"Use Case 2: Generating HTML from Sketches with AI",id:"use-case-2-generating-html-from-sketches-with-ai",level:2},{value:"Use Case 3: Managing Multiple Sketch Pages",id:"use-case-3-managing-multiple-sketch-pages",level:2},{value:"Use Case 4: Editing Mockup Styles and Adding Page Links",id:"use-case-4-editing-mockup-styles-and-adding-page-links",level:2},{value:"Use Case 5: Exporting HTML Files",id:"use-case-5-exporting-html-files",level:2},{value:"Use Case 6: Real-time Collaboration",id:"use-case-6-real-time-collaboration",level:2}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"sequence-diagrams",children:"Sequence Diagrams"})}),"\n",(0,a.jsx)(n.h2,{id:"use-case-1-starting-a-session-and-drawing-ui-sketches",children:"Use Case 1: Starting a Session and Drawing UI Sketches"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a user, I want to start sketching UI components for my website"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"User navigates to the Sketch2Screen application URL"}),"\n",(0,a.jsx)(n.li,{children:"Frontend generates unique session ID and creates initial page"}),"\n",(0,a.jsx)(n.li,{children:"User sees Excalidraw canvas interface with drawing tools"}),"\n",(0,a.jsx)(n.li,{children:"User draws UI components (buttons, forms, navigation, etc.) on canvas"}),"\n",(0,a.jsx)(n.li,{children:"Frontend tracks all drawing changes in local state"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"---\ntitle: Sequence Diagram 1 \u2013 Starting a Session and Drawing UI Sketches\n---\n\nsequenceDiagram\n    actor User\n    participant Frontend\n\n    User->>Frontend: Navigate to application URL\n    Frontend->>Frontend: Generate session ID from timestamp\n    Frontend->>Frontend: Create initial page with Excalidraw canvas\n    Frontend--\x3e>User: Display drawing interface\n\n    User->>Frontend: Draw UI components on canvas\n    Frontend->>Frontend: Update scene state with drawing data\n    Frontend--\x3e>User: Show real-time drawing feedback\n\n    Note over User,Frontend: All drawing stored locally<br/>in React state"}),"\n",(0,a.jsx)(n.h2,{id:"use-case-2-generating-html-from-sketches-with-ai",children:"Use Case 2: Generating HTML from Sketches with AI"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a user, I want to convert my sketches into production-ready HTML using Claude AI"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:'User clicks "Generate" button in navbar'}),"\n",(0,a.jsx)(n.li,{children:"Frontend shows loading indicator"}),"\n",(0,a.jsx)(n.li,{children:"Frontend checks which pages have changed since last generation (smart caching)"}),"\n",(0,a.jsx)(n.li,{children:"For each changed page, frontend exports canvas to PNG via Excalidraw API"}),"\n",(0,a.jsxs)(n.li,{children:["Frontend sends multipart/form-data to ",(0,a.jsx)(n.code,{children:"/api/generate-multi/"})," with all page images"]}),"\n",(0,a.jsx)(n.li,{children:"Backend processes each image in parallel using asyncio"}),"\n",(0,a.jsx)(n.li,{children:"Backend converts PNG to base64 and sends to Claude API"}),"\n",(0,a.jsx)(n.li,{children:"Claude analyzes sketch and returns raw HTML with Tailwind CSS"}),"\n",(0,a.jsx)(n.li,{children:"Frontend receives HTML for each page and displays in sanitized iframe"}),"\n",(0,a.jsx)(n.li,{children:"Frontend caches scene state to avoid regenerating unchanged pages next time"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:'---\ntitle: Sequence Diagram 2 \u2013 Generating HTML from Sketches with AI\n---\n\nsequenceDiagram\n    actor User\n    participant Frontend\n    participant Backend as Backend (Django)\n    participant Claude as Claude API (Anthropic)\n\n    User->>Frontend: Click "Generate" button\n    Frontend--\x3e>User: Show loading indicator\n    Frontend->>Frontend: Compare scenes with lastGeneratedScenes cache\n\n    loop For each changed page\n        Frontend->>Frontend: Export canvas to PNG blob (exportToBlob)\n    end\n\n    Frontend->>Backend: POST /api/generate-multi/ (multipart/form-data)\n    Note over Frontend,Backend: FormData contains:<br/>file_0, file_1, ...<br/>name_0, name_1, ...<br/>id_0, id_1, ...<br/>count\n\n    loop For each uploaded image (parallel async)\n        Backend->>Backend: Read image bytes\n        Backend->>Backend: Convert to base64\n        Backend->>Claude: Send image + system prompt\n        Note over Claude: Model: claude-haiku-4-5-20251001<br/>Analyzes sketch, generates HTML<br/>with Tailwind CSS\n        Claude--\x3e>Backend: Return raw HTML (no markdown)\n    end\n\n    Backend--\x3e>Frontend: JSON { results: [{id, html}, ...] }\n\n    Frontend->>Frontend: Combine new + cached mockups\n    Frontend->>Frontend: Update lastGeneratedScenes cache\n    Frontend->>Frontend: Switch to Mockup view\n    Frontend--\x3e>User: Display generated HTML in iframe (DOMPurify sanitized)\n\n    alt Generation fails\n        Backend--\x3e>Frontend: Error response\n        Frontend--\x3e>User: Display "Generation failed"\n    end'}),"\n",(0,a.jsx)(n.h2,{id:"use-case-3-managing-multiple-sketch-pages",children:"Use Case 3: Managing Multiple Sketch Pages"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a user, I want to create multiple pages for a multi-page website design"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:'User clicks "Add Page" button in sidebar'}),"\n",(0,a.jsx)(n.li,{children:"Frontend creates new page and switches to it"}),"\n",(0,a.jsx)(n.li,{children:"User can rename pages by double-clicking page name"}),"\n",(0,a.jsx)(n.li,{children:"User can duplicate pages to reuse design"}),"\n",(0,a.jsx)(n.li,{children:"User can delete pages (minimum 1 page required)"}),"\n",(0,a.jsx)(n.li,{children:"User can switch between pages to work on different screens"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:'---\ntitle: Sequence Diagram 3 \u2013 Managing Multiple Sketch Pages\n---\n\nsequenceDiagram\n    actor User\n    participant Frontend\n\n    User->>Frontend: Click "Add Page"\n    Frontend->>Frontend: Create new page with unique ID\n    Frontend->>Frontend: Set as active page\n    Frontend--\x3e>User: Display new blank canvas\n\n    User->>Frontend: Double-click page name\n    Frontend--\x3e>User: Show rename input\n    User->>Frontend: Enter new name\n    Frontend->>Frontend: Update page name in state\n\n    User->>Frontend: Click "Duplicate Page"\n    Frontend->>Frontend: Clone page with scene data\n    Frontend->>Frontend: Add to pages array\n    Frontend--\x3e>User: Show duplicated page\n\n    User->>Frontend: Switch to different page\n    Frontend->>Frontend: Update active page ID\n    Frontend->>Frontend: Load page\'s scene into Excalidraw\n    Frontend--\x3e>User: Display selected page\'s canvas'}),"\n",(0,a.jsx)(n.h2,{id:"use-case-4-editing-mockup-styles-and-adding-page-links",children:"Use Case 4: Editing Mockup Styles and Adding Page Links"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a user, I want to customize the generated HTML and link pages together"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"User views generated mockup in iframe"}),"\n",(0,a.jsx)(n.li,{children:"User clicks element inspector to select HTML element"}),"\n",(0,a.jsx)(n.li,{children:"User modifies CSS styles (colors, sizes, spacing, etc.)"}),"\n",(0,a.jsxs)(n.li,{children:["Frontend tracks style changes in ",(0,a.jsx)(n.code,{children:"mockupStyles"})," state with undo/redo history"]}),"\n",(0,a.jsx)(n.li,{children:"User can link elements to other pages via link dialog"}),"\n",(0,a.jsxs)(n.li,{children:["Frontend stores page links in ",(0,a.jsx)(n.code,{children:"pageLinks"})," state mapping elementId to target pageId"]}),"\n",(0,a.jsx)(n.li,{children:"Changes are applied immediately in iframe and persisted for export"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:'---\ntitle: Sequence Diagram 4 \u2013 Editing Mockup Styles and Adding Page Links\n---\n\nsequenceDiagram\n    actor User\n    participant Frontend\n    participant Iframe as Mockup Iframe\n\n    User->>Frontend: View generated mockup\n    Frontend--\x3e>User: Display HTML in iframe\n\n    User->>Frontend: Click element inspector\n    Frontend->>Iframe: Enable element selection\n    User->>Iframe: Click HTML element\n    Iframe--\x3e>Frontend: Return selected element\n\n    User->>Frontend: Modify CSS styles in style editor\n    Frontend->>Frontend: Update mockupStyles state\n    Note over Frontend: Stores per-page, per-element:<br/>{ current, history, future }\n    Frontend->>Iframe: Apply style changes to element\n    Iframe--\x3e>User: Show updated styles\n\n    alt User wants to link to another page\n        User->>Frontend: Click "Add Page Link"\n        Frontend--\x3e>User: Show page link dialog\n        User->>Frontend: Select target page\n        Frontend->>Frontend: Update pageLinks state\n        Note over Frontend: Maps elementId -> targetPageId\n        Frontend->>Iframe: Add click handler to element\n    end\n\n    User->>Frontend: Undo/Redo style changes\n    Frontend->>Frontend: Navigate history/future arrays\n    Frontend->>Iframe: Apply historical styles\n\n    Note over Frontend: No backend calls -<br/>all state managed in React'}),"\n",(0,a.jsx)(n.h2,{id:"use-case-5-exporting-html-files",children:"Use Case 5: Exporting HTML Files"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a user, I want to export my generated mockups as HTML files"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"User clicks export option from navbar dropdown"}),"\n",(0,a.jsx)(n.li,{children:"User chooses export format: single page, multi-page single HTML, or multi-page ZIP"}),"\n",(0,a.jsx)(n.li,{children:"Frontend reads iframe content and applies all style modifications"}),"\n",(0,a.jsx)(n.li,{children:"Frontend processes page links to enable navigation between pages"}),"\n",(0,a.jsx)(n.li,{children:"System generates download with all customizations applied"}),"\n",(0,a.jsx)(n.li,{children:"User receives HTML file(s) ready to deploy"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:'---\ntitle: Sequence Diagram 5 \u2013 Exporting HTML Files\n---\n\nsequenceDiagram\n    actor User\n    participant Frontend\n    participant Iframe as Mockup Iframe\n    participant Browser\n\n    User->>Frontend: Click export dropdown in navbar\n    Frontend--\x3e>User: Show export options\n\n    alt Export Single Page\n        User->>Frontend: Click "Export Current Page"\n        Frontend->>Iframe: Read iframe document\n        Frontend->>Frontend: Apply mockupStyles changes\n        Frontend->>Frontend: Generate clean HTML with inline styles\n        Frontend->>Browser: Trigger download "{pageName}.html"\n        Browser--\x3e>User: Download HTML file\n    end\n\n    alt Export Multi-Page (Single HTML)\n        User->>Frontend: Click "Export as Single HTML"\n        Frontend->>Frontend: Gather all mockup pages\n\n        loop For each mockup page\n            Frontend->>Frontend: Apply style modifications\n            Frontend->>Frontend: Process page links\n        end\n\n        Frontend->>Frontend: Combine into single HTML with navigation\n        Note over Frontend: Adds internal links<br/>and page switching logic\n        Frontend->>Browser: Trigger download "{projectName}.html"\n        Browser--\x3e>User: Download single HTML file\n    end\n\n    alt Export Multi-Page (ZIP)\n        User->>Frontend: Click "Export as ZIP"\n        Frontend->>Frontend: Gather all mockup pages\n\n        loop For each mockup page\n            Frontend->>Frontend: Apply style modifications\n            Frontend->>Frontend: Convert page links to relative paths\n            Frontend->>Frontend: Create individual HTML file\n        end\n\n        Frontend->>Frontend: Package files into ZIP\n        Note over Frontend: Uses JSZip library\n        Frontend->>Browser: Trigger download "{projectName}.zip"\n        Browser--\x3e>User: Download ZIP archive\n    end\n\n    Note over Frontend,Browser: No backend calls -<br/>all processing client-side'}),"\n",(0,a.jsx)(n.h2,{id:"use-case-6-real-time-collaboration",children:"Use Case 6: Real-time Collaboration"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"As a collaborator, I want to join an existing session and edit together"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:['User A clicks "Start Collaboration" and shares link with ',(0,a.jsx)(n.code,{children:"?collab={collabID}"})," parameter"]}),"\n",(0,a.jsx)(n.li,{children:"User B clicks the link and enters username when prompted"}),"\n",(0,a.jsxs)(n.li,{children:["Frontend connects to WebSocket at ",(0,a.jsx)(n.code,{children:"/ws/collab/{collabID}/"})]}),"\n",(0,a.jsx)(n.li,{children:"Backend syncs existing pages and collaborators to User B"}),"\n",(0,a.jsx)(n.li,{children:"Both users can now draw and see each other's changes in real-time"}),"\n",(0,a.jsx)(n.li,{children:"Collaborator cursors are shown (filtered by active page)"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:'---\ntitle: Sequence Diagram 6 \u2013 Real-time Collaboration\n---\n\nsequenceDiagram\n    actor UserA as User A (Host)\n    actor UserB as User B (Joining)\n    participant Frontend\n    participant WebSocket\n    participant CollabServer as CollabServer (Backend)\n\n    UserA->>Frontend: Click "Start Collaboration"\n    Frontend--\x3e>UserA: Display username dialog\n    UserA->>Frontend: Enter username\n    Frontend->>WebSocket: Connect to /ws/collab/{collabID}/\n    Frontend--\x3e>UserA: Show shareable link\n\n    UserA->>UserB: Share link with ?collab={collabID}\n    UserB->>Frontend: Click link and navigate\n    Frontend--\x3e>UserB: Show username dialog\n    UserB->>Frontend: Enter username and confirm\n    Frontend->>WebSocket: Connect to /ws/collab/{collabID}/\n\n    CollabServer->>CollabServer: Find existing session\n    CollabServer->>CollabServer: Add User B to members\n\n    loop Sync existing state to User B\n        CollabServer->>WebSocket: Send page_update\n        CollabServer->>WebSocket: Send scene_update\n        CollabServer->>WebSocket: Send collaborator_join\n    end\n\n    WebSocket--\x3e>Frontend: Receive full state\n    Frontend--\x3e>UserB: Display shared canvas\n\n    Note over UserA,UserB: Both users can now draw<br/>Changes broadcast via WebSocket<br/>Scene diffs prevent conflicts\n\n    UserA->>Frontend: Draw on canvas\n    Frontend->>WebSocket: Send scene_update (diff)\n    WebSocket->>CollabServer: Apply diff to session\n    CollabServer->>WebSocket: Broadcast to User B\n    Frontend--\x3e>UserB: Update canvas with User A\'s drawing'})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);